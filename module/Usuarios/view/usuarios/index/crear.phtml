<?php
$this->form->prepare();
$this->form->setAttribute('action', $this->url('usuarios', ['action' => 'guardar']))
        ->setAttribute('method', 'post')
        ->setAttribute('class', 'form-horizontal')
        ->setAttribute('role', 'form');
?>
<div class="row">
    <div class="col-sm-10 col-sm-offset-1">

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title"><?= $this->titulo ?></h3>
            </div>
            <div class="panel-body">
                <?= $this->form()->openTag($this->form); ?>
                <?= $this->formHidden($this->form->get('id')) ?>
                <div class="form-group <?= (!empty($this->form->get('nombre')->getMessages())) ? 'has-error' : '' ?>">
                    <?= $this->formLabel($this->form->get('nombre')) ?>
                    <div class="col-sm-5">
                        <?= $this->formInput($this->form->get('nombre')) ?>
                    </div>
                    <div style="color: red"><?= $this->formElementErrors($this->form->get('nombre')) ?></div>
                </div>

                <div class="form-group <?= (!empty($this->form->get('apellido')->getMessages())) ? 'has-error' : '' ?>">
                    <?= $this->formLabel($this->form->get('apellido')) ?>
                    <div class="col-sm-5">
                        <?= $this->formInput($this->form->get('apellido')) ?>
                    </div>
                    <div style="color: red"><?= $this->formElementErrors($this->form->get('apellido')) ?></div>
                </div>

                <div class="form-group <?= (!empty($this->form->get('email')->getMessages())) ? 'has-error' : '' ?>">
                    <?= $this->formLabel($this->form->get('email')) ?>
                    <div class="col-sm-5">
                        <?= $this->formEmail($this->form->get('email')) ?>
                    </div>
                    <div style="color: red"><?= $this->formElementErrors($this->form->get('email')) ?></div>
                </div>

                <div class="form-group <?= (!empty($this->form->get('usuario')->getMessages())) ? 'has-error' : '' ?>">
                    <?= $this->formLabel($this->form->get('usuario')) ?>
                    <div class="col-sm-5">
                        <?= $this->formInput($this->form->get('usuario')) ?>
                    </div>
                    <div style="color: red"><?= $this->formElementErrors($this->form->get('usuario')) ?></div>
                </div>

                <div class="form-group <?= (!empty($this->form->get('password')->getMessages())) ? 'has-error' : '' ?>">
                    <?= $this->formLabel($this->form->get('password')) ?>
                    <div class="col-sm-5">
                        <?= $this->formPassword($this->form->get('password')) ?>
                    </div>
                    <div style="color: red"><?= $this->formElementErrors($this->form->get('password')) ?></div>
                </div>

                
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-5">
                        <?= $this->formSubmit($form->get('guardar')) ?>
                    </div>
                </div>

                <?= $this->form()->closeTag() ?>

            </div>
        </div>
    </div>
</div>